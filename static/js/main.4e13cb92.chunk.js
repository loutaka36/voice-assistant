(this["webpackJsonpbaymax-single-page"]=this["webpackJsonpbaymax-single-page"]||[]).push([[0],{117:function(e,t,n){e.exports=n(246)},122:function(e,t,n){},124:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(23),r=n.n(o),i=(n(122),n(14)),c=n.n(i),u=n(26),l=n(27),p=n(28),h=n(29),d=n(21),y=n(30);n(124);function w(){var e,t,n;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.awrap(navigator.bluetooth.requestDevice({filters:[{name:"light"}],optionalServices:[4369]}));case 3:return e=a.sent,a.next=6,c.a.awrap(e.gatt.connect());case 6:return t=a.sent,a.next=9,c.a.awrap(t.getPrimaryService(4369));case 9:return n=a.sent,a.next=12,c.a.awrap(n.getCharacteristic(8738));case 12:this.characteristic=a.sent,this.setState({connectionStatus:"Device connected"}),a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),console.log(a.t0),this.setState({connectionStatus:"Device connection failed"});case 20:case"end":return a.stop()}}),null,this,[[0,16]])}var m=[{regex:/hello|hi|howdy|yo|sup|what's up|hey|aloha/,response:{response:function(){var e=["hi there","yo yo yo","aloha","what's good","howdy","greetings human"];return e[Math.floor(Math.random()*e.length)]}}},{regex:/fist bump/,response:{response:"FA LALALA"}},{regex:/[\w\s]*directions[\w\s]*to[\w\s]*|[\w\s]*navigate[\w\s]*to[\w\s]*/,response:{response:"um, I'm not google maps, you can figure that out yourself"}},{regex:/[\w\s]*remind[\w\s]*me[\w\s]*|[\w\s]*set[\w\s]*reminder[\w\s]*/,response:{response:"it's not my problem that you're forgetful. why don't you go ask Siri or Alexa to do that for you"}},{regex:/pain|hurts|hurt/,response:{response:"on a scale of 1 to 10, how would you rate your pain?",followUpId:2}},{regex:/[\w\s]*time[\w\s]*/,response:{response:function(){var e,t=new Date,n=t.getHours(),a=t.getMinutes();return 0===n?(n=12,e="AM"):n<12?e="AM":12===n?e="PM":(n-=12,e="PM"),a<10&&(a="0"+a),"It's currently ".concat(n,":").concat(a," ").concat(e)}}},{regex:/nevermind|just kidding|no/,response:{response:"ok, no problem"}},{regex:/[\w\s]*sick[\w\s]*/,response:{response:"oh no, what are you symptoms?",followUpId:1}},{regex:/[\w\s]*light(?:s)?[\w\s]*on[\w\s]*|[\w\s]*on[\w\s]*light(?:s)?[\w\s]*/,response:{response:"ok, I'll turn them on",exec:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.awrap(this.characteristic.writeValue(new Uint8Array([255,255])));case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),"TypeError"!==e.t0.name){e.next=11;break}return e.abrupt("return","Oh no, looks like you don't have a device connected. Try connecting one and try again");case 11:return e.abrupt("return","Oh no, your device got disconnected");case 12:case"end":return e.stop()}}),null,this,[[0,5]])}}},{regex:/[\w\s]*light(?:s)?[\w\s]*off[\w\s]*|[\w\s]*off[\w\s]*light(?:s)?[\w\s]*/,response:{response:"ok, I'll turn them off",exec:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.awrap(this.characteristic.writeValue(new Uint8Array([0,0])));case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),"TypeError"!==e.t0.name){e.next=11;break}return e.abrupt("return","Oh no, looks like you don't have a device connected. Try connecting one and try again");case 11:return e.abrupt("return","Oh no, your device got disconnected");case 12:case"end":return e.stop()}}),null,this,[[0,5]])}}},{regex:/[\w\s]*power[\w\s]*down[\w\s]*|[\w\s]*power[\w\s]*off[\w\s]*/,response:{response:"goodbye",exec:function(){this.setState({poweredOn:!1})}}}],g=function(e){var t=!0,n=!1,a=void 0;try{for(var s,o=m[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;if(e.match(r.regex))return r.response}}catch(i){n=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return{response:"Sorry, I don't understand what you just said"}},f={1:function(e){return e.match("head")?"put some ice on it":"Sorry, I don't know about that. I think WebMD might be able to help you."},2:function(e){return e.match(/ten|10/)?"that's very severe. Please call an ambulance right away":e.match(/seven|eight|nine|7|8|9/)?"that doesn't sound good. You need to go to a hopsital.":e.match(/four|five|six|4|5|6/)?"ouch. some pain medications such as advil may help. If you don't see improvement, I would go see a doctor.":e.match(/one|two|three|1|2|3/)?"doesn't seem too serious. I suggest taking it easy for now.":"your response didn't make sense to me. I will assume that you are not hurt"}},x=function(e,t){return f[t]?f[t](e):"Sorry, I don't understand what you just said"},v=n(251),b=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={displayText:"",inquiring:!1,followUpId:null,connectionStatus:"Device not connected",speechResults:"",poweredOn:!1};var a=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition;return null!=a?(n.recognition=n.createRecognition(a),n.baymax=n.createBaymaxVoice()):window.alert("The current browser does not support the SpeechRecognition API."),n.characteristic=null,n.handlePower=n.handlePower.bind(Object(d.a)(n)),n}return Object(y.a)(t,e),Object(l.a)(t,[{key:"createRecognition",value:function(e){var t=this,n=new e;return n.continuous=!0,n.interimResults=!1,n.lang="en-US",n.onstart=function(){console.log("Listening!")},n.onend=function(){console.log("Stopping"),t.state.poweredOn&&t.recognition.start()},n.onresult=function(e){var n,a,s,o,r,i,u,l,p,h,d,y,w,m,f,v,b;return c.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:if(n=e.results[0][0].transcript,t.setState({speechResults:n}),console.log(n),"hi"!==n||t.state.inquiring){S.next=9;break}a=new SpeechSynthesisUtterance("yes?"),t.baymax.speak(a),t.setState({displayText:"Yes?",inquiring:!0}),S.next=29;break;case 9:if(!t.state.inquiring||t.state.followUpId){S.next=28;break}if(s=g(n),o=s.response,r=s.followUpId,!(i=s.exec)||r){S.next=18;break}return S.next=14,c.a.awrap(i.bind(t)());case 14:"Oh no, your device got disconnected"===(u=S.sent)?(l=new SpeechSynthesisUtterance(u),t.baymax.speak(l),t.setState({displayText:u,inquiring:!1,connectionStatus:"Device disconnected"})):u?(p=new SpeechSynthesisUtterance(u),t.baymax.speak(p),t.setState({displayText:u,inquiring:!1})):(h=new SpeechSynthesisUtterance(o),t.baymax.speak(h),t.setState({displayText:o,inquiring:!1})),S.next=26;break;case 18:if(!i||!r){S.next=25;break}return S.next=21,c.a.awrap(i.bind(t)());case 21:(d=S.sent)?(y=new SpeechSynthesisUtterance(d),t.baymax.speak(y),t.setState({displayText:d,inquiring:!1})):(w=new SpeechSynthesisUtterance(o),t.baymax.speak(w),t.setState({displayText:o,inquiring:!0,followUpId:r})),S.next=26;break;case 25:r?(m=new SpeechSynthesisUtterance(o),t.baymax.speak(m),t.setState({displayText:o,inquiring:!0,followUpId:r})):("function"===typeof o&&(o=o()),f=new SpeechSynthesisUtterance(o),t.baymax.speak(f),t.setState({displayText:o,inquiring:!1}));case 26:S.next=29;break;case 28:t.state.inquiring&&t.state.followUpId&&(v=x(n,t.state.followUpId),b=new SpeechSynthesisUtterance(v),t.baymax.speak(b),t.setState({displayText:v,inquiring:!1,followUpId:null}));case 29:t.recognition.stop();case 30:case"end":return S.stop()}}))},n}},{key:"createBaymaxVoice",value:function(){return window.speechSynthesis}},{key:"componentWillUnmount",value:function(){this.recognition.abort()}},{key:"handlePower",value:function(){if(this.state.poweredOn){this.recognition.stop();var e=new SpeechSynthesisUtterance("goodbye");this.baymax.speak(e),this.setState({poweredOn:!1,displayText:"goodbye",speechResults:""})}else{this.recognition.start();var t=new SpeechSynthesisUtterance('Hi, I am Baymax, your personal assistant. Say "Hey Baymax" if you need anything.');this.baymax.speak(t),this.setState({poweredOn:!0,displayText:'Hi, I am Baymax, your personal assistant. Say "Hey Baymax" if you need anything.',speechResults:""})}}},{key:"render",value:function(){var e,t;return this.state.poweredOn?(e="eyelid-top",t="eyelid-bottom"):(e="eyelid-top-inactive",t="eyelid-bottom-inactive"),s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"baymax-container"},s.a.createElement("div",{className:"baymax"}),s.a.createElement("div",{className:e}),s.a.createElement("div",{className:t})),s.a.createElement("div",null,this.state.displayText),s.a.createElement("div",{className:"user-input"},s.a.createElement("div",{className:"user-input_label"},"Your Input:"),s.a.createElement("div",{className:"user-input_results"},this.state.speechResults)),s.a.createElement(v.a,{className:"power",onClick:this.handlePower},this.state.poweredOn?"Shut Down":"Power On"),s.a.createElement("div",null,s.a.createElement(v.a,{onClick:w.bind(this)},"Connect To Device"),s.a.createElement("div",{className:"connection-status"},this.state.connectionStatus)))}}]),t}(s.a.Component);n(245);r.a.render(s.a.createElement(b,null),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.4e13cb92.chunk.js.map